
<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>FAQ Nissan - Colaborativo</title>
<style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      padding: 20px;
      color: #333;
    }
    h1 {
      color: #0066cc;
    }
    .faq-form, .faq-list, .faq-search, .login-section {
      margin-top: 20px;
      max-width: 700px;
    }
    textarea, input {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      font-size: 1rem;
    }
    button {
      padding: 8px 14px;
      background-color: #0066cc;
      color: #fff;
      border: none;
      cursor: pointer;
      margin-top: 5px;
      font-size: 0.95rem;
    }
    button:hover {
      background-color: #004a99;
    }
    .faq-item {
      background: #fff;
      margin-top: 15px;
      padding: 12px;
      border-left: 4px solid #ffcc00;
    }
    .resposta {
      background: #eef2ff;
      padding: 8px;
      margin-top: 8px;
      border-left: 3px solid #0066cc;
    }
    .hidden {
      display: none;
    }
  
    .delete-btn {
      float: right;
      background: none;
      border: none;
      color: #999;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .delete-btn:hover {
      color: red;
    }
</style>
</head>
<body>
<h1>FAQ Colaborativo - Fiat</h1>
<div class="login-section" id="loginSection">
<h3>üë§ Identifica√ß√£o</h3>
<input id="username" placeholder="Nome de usu√°rio" type="text"/>
<button onclick="login()">Entrar</button>
<button onclick="loginAnonimo()">Entrar como An√¥nimo</button></div>
<div class="hidden" id="mainContent"><button onclick="location.href='index.html'">‚¨ÖÔ∏è Voltar</button>
<div class="faq-search">
<input id="search" oninput="searchFAQ()" placeholder="üîç Pesquisar perguntas..." type="text"/>
</div>
<div class="faq-form">
<h3>Envie sua pergunta</h3>
<textarea id="question" placeholder="Digite apenas a pergunta"></textarea>
<button onclick="saveQuestion()">Enviar pergunta</button>
</div>
<div class="faq-list" id="faqList">
<h3>Perguntas Frequentes</h3>
</div>
</div>
<script>
    const bannedWords = ["burro", "idiota", "merda", "porra", "caralho", "fdp", "filho da puta", "imbecil", "bosta"];

    function containsOffensiveWords(text) {
      const lower = text.toLowerCase();
      return bannedWords.some(word => lower.includes(word));
    }

    function login() {
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();

      if (user) {
        localStorage.setItem('faq_user', user);
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
        loadFAQ();
      } else {
        alert("Digite seu nome/apelido para continuar.");
      }
    }

    function checkLogin() {
      const user = localStorage.getItem('faq_user');
      if (user) {
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
        loadFAQ();
      }
    }

    function saveQuestion() {
      const q = document.getElementById('question').value.trim();
      if (!q) {
        alert("Digite a pergunta.");
        return;
      }
      if (containsOffensiveWords(q)) {
        alert("‚ö†Ô∏è Sua pergunta cont√©m palavras proibidas e n√£o pode ser enviada.");
        return;
      }

      let dados = JSON.parse(localStorage.getItem('faq_fiat_v1') || '[]');
      dados.push({ id: Date.now(), pergunta: q, respostas: [], autor: localStorage.getItem('faq_user') });
      localStorage.setItem('faq_fiat_v1', JSON.stringify(dados));
      document.getElementById('question').value = '';
      loadFAQ();
    }

    function addResposta(id) {
      const resposta = prompt("Digite sua resposta:");
      if (!resposta || containsOffensiveWords(resposta)) {
        alert("‚ö†Ô∏è Resposta inv√°lida ou com linguagem proibida.");
        return;
      }

      let dados = JSON.parse(localStorage.getItem('faq_fiat_v1') || '[]');
      const idx = dados.findIndex(item => item.id === id);
      if (idx >= 0) {
        dados[idx].respostas.push(localStorage.getItem("faq_user") + ": " + resposta);
        localStorage.setItem('faq_fiat_v1', JSON.stringify(dados));
        loadFAQ();
      }
    }

    function loadFAQ(filter = '') {
      const lista = document.getElementById('faqList');
      lista.innerHTML = '<h3>Perguntas Frequentes</h3>';
      const dados = JSON.parse(localStorage.getItem('faq_fiat_v1') || '[]');

      dados.filter(item => item.pergunta.toLowerCase().includes(filter)).forEach(item => {
        const div = document.createElement('div');
        div.className = 'faq-item';
        div.innerHTML = `<strong>P:</strong> ${item.pergunta} <em>por ${item.autor}</em> <button class="delete-btn" onclick="deleteItem(${item.id})">üóëÔ∏è</button><br><button onclick="addResposta(${item.id})">Responder</button>`;
        item.respostas.forEach((r, i) => {
          const resp = document.createElement('div');
          resp.className = 'resposta';
          resp.innerHTML = "üó®Ô∏è " + r + '<button class="delete-btn" onclick="deleteItem(' + item.id + ', ' + i + ')">üóëÔ∏è</button>';
          div.appendChild(resp);
        });
        lista.appendChild(div);
      });
    }

    function searchFAQ() {
      const termo = document.getElementById('search').value.toLowerCase();
      loadFAQ(termo);
    }

    window.onload = checkLogin;
  
    function loginAnonimo() {
      const nome = "usu√°rio/" + Math.floor(Math.random() * 100000);
      alert("Voc√™ entrou como: " + nome);
      localStorage.setItem('faq_user', nome);
      document.getElementById('loginSection').classList.add('hidden');
      document.getElementById('mainContent').classList.remove('hidden');
      loadFAQ();
    }


    function deleteItem(id, respostaIndex = null) {
      const senha = prompt("Senha de administrador:");
      if (senha !== "@Nono2023") {
        alert("Senha incorreta.");
        return;
      }
      let dados = JSON.parse(localStorage.getItem('faq_fiat_v1') || '[]');
      if (respostaIndex === null) {
        // Apagar pergunta
        dados = dados.filter(item => item.id !== id);
      } else {
        // Apagar resposta
        const idx = dados.findIndex(item => item.id === id);
        if (idx >= 0) {
          dados[idx].respostas.splice(respostaIndex, 1);
        }
      }
      localStorage.setItem('faq_fiat_v1', JSON.stringify(dados));
      loadFAQ();
    }
</script>
</body>
</html>
