<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cotações - Resumo Invest</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      color: #2c3e50;
    }
    .cotacao {
      margin-bottom: 10px;
    }
    .links a {
      color: blue;
      text-decoration: none;
      display: block;
      margin: 5px 0;
    }
    .atualizacao {
      margin-top: 20px;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Cotações</h1>
  <div class="cotacao" id="ibov">Ibovespa: carregando...</div>
  <div class="cotacao" id="ifix">IFIX: carregando...</div>
  <div class="cotacao" id="usd">Dólar: carregando...</div>

  <div class="links">
    <a href="https://www.youtube.com/@Resumo.invest" target="_blank">YouTube: @Resumo.invest</a>
    <a href="https://www.tiktok.com/@resumo.invest" target="_blank">TikTok: @resumo.invest</a>
  </div>

  <div class="atualizacao" id="atualizacao">Última atualização: carregando...</div>

  <script>
    async function buscarCotacoes() {
      try {
        const resposta = await fetch('https://brapi.dev/api/quote/^BVSP,^IFIX,USD');
        const dados = await resposta.json();

        const cotacoes = dados.results;

        const ibov = cotacoes.find(item => item.symbol === '^BVSP');
        const ifix = cotacoes.find(item => item.symbol === '^IFIX');
        const usd = cotacoes.find(item => item.symbol === 'USD');

        document.getElementById('ibov').textContent = ibov ? `Ibovespa: ${ibov.regularMarketPrice}` : 'Ibovespa: erro ao carregar';
        document.getElementById('ifix').textContent = ifix ? `IFIX: ${ifix.regularMarketPrice}` : 'IFIX: erro ao carregar';
        document.getElementById('usd').textContent = usd ? `Dólar: ${usd.regularMarketPrice}` : 'Dólar: erro ao carregar';

        const agora = new Date();
        const horaFormatada = agora.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
        document.getElementById('atualizacao').textContent = `Última atualização: ${horaFormatada}`;
      } catch (erro) {
        document.getElementById('ibov').textContent = 'Ibovespa: erro ao carregar';
        document.getElementById('ifix').textContent = 'IFIX: erro ao carregar';
        document.getElementById('usd').textContent = 'Dólar: erro ao carregar';
        document.getElementById('atualizacao').textContent = 'Última atualização: erro ao carregar';
        console.error('Erro ao buscar cotações:', erro);
      }
    }

    buscarCotacoes();
  </script>
</body>
</html>
